% !TEX root = ./test-graphics.tex

\subimport{.}{hw-example-simple}

%%%%%%%%%%%%%
\tikzmath{
    \firmheight=3.5cm;
    \creditorshare=0.5cm;
}
\node (firm) at ([xshift=7cm, yshift=-0.75cm]center.east) [
    anchor=south west,
    draw,
    very thick,
    minimum width=2cm,
    minimum height=\firmheight
] {};
\filldraw[shareholder-color] 
    ([yshift=-\creditorshare]firm.west) --
    ([yshift=-\creditorshare]firm.east) --
    (firm.north east) --
    (firm.north west) --
    cycle;
\filldraw[creditor-color] 
    ([yshift=\creditorshare]firm.west) --
    ([yshift=\creditorshare]firm.east) --
    (firm.south east) --
    (firm.south west) --
    cycle;

\node (firm) at ([xshift=7cm, yshift=-0.75cm]center.east) [
    anchor=south west,
    draw,
    very thick,
    minimum width=2cm,
    minimum height=\firmheight
] {};

\node at ([yshift=\labeldistance]firm.north) [
    anchor=south
] {\textbf{Firm}};

\node at ([xshift=\labeldistance, yshift=\firmheight/4 + \creditorshare/2]firm.east) [
    anchor=west,
    color=shareholder-color
] {Equity};

\node at ([xshift=\labeldistance, yshift=-\firmheight/4 + \creditorshare/2]firm.east) [
    anchor=west,
    color=creditor-color
] {Debt};

%%%%%%%%%%%%%

\node (new-npv) at ([xshift=-2cm]firm.west) [
    anchor=south west,
    draw,
    very thick,
    minimum width=\barwidth,
    minimum height=\pvheight*(1-\pricereduction),
] {};

\filldraw[shareholder-color] 
    (new-npv.west) --
    (new-npv.east) --
    (new-npv.north east) --
    (new-npv.north west) --
    cycle;
\filldraw[creditor-color] 
    (new-npv.west) --
    (new-npv.east) --
    (new-npv.south east) --
    (new-npv.south west) --
    cycle;

\node (new-npv) at ([xshift=-2cm]firm.west) [
    anchor=south west,
    draw,
    very thick,
    minimum width=\barwidth,
    minimum height=\pvheight*(1-\pricereduction),
] {};

\draw[->, thick]
    ([xshift=0.1cm]npv.north east) --
    ([xshift=-0.1cm]new-npv.west);

\draw[->, thick]
    ([yshift=-0.1cm]new-npv.south) |- 
    ([xshift=0.5cm, yshift=-\firmheight/4 + \creditorshare/2]firm.west);


\draw[->, thick]
    ([yshift=0.1cm]new-npv.north) |- 
    ([xshift=0.5cm, yshift=\firmheight/4 + \creditorshare/2]firm.west);